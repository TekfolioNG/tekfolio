<template>
  <main ref="heroElement"
    class="relative w-full min-h-screen overflow-hidden transition-all duration-500 pb-16 md:pb-16"
    :class="isDarkMode ? 'bg-gray-900' : 'bg-white'" @mousemove="handleMouseMove" @mouseleave="handleMouseLeave">
    <!-- Animated gradient orb -->
    <div v-if="isDarkMode" class="absolute inset-0 pointer-events-none transition-opacity duration-500" :style="{
      background: `radial-gradient(800px at ${mouseX}px ${mouseY}px, rgba(91, 33, 182, 0.1), transparent 80%)`
    }" />

    <!-- Content Container -->
    <div class="container mx-auto px-6 md:px-12 lg:px-16 min-h-screen flex items-center relative z-10">
      <div class="grid grid-cols-1 lg:grid-cols-5 gap-4 md:gap-8 lg:gap-12 items-center w-full py-8 md:py-12 lg:py-0">

        <!-- Left Side - Hero Text Content (3/5 on desktop) -->
        <div class="text-center lg:text-left order-2 lg:order-1 lg:col-span-3 space-y-3 md:space-y-5 lg:pr-8 lg:pt-16">
          <!-- Headlines with styled "Built Differently" -->
          <div class="space-y-1">
            <h1 class="hero-headline leading-[1.1]">
              <span
                class="block text-3xl sm:text-3xl md:text-4xl lg:text-[2.75rem] font-bold transition-colors duration-500"
                :class="isDarkMode ? 'text-gray-100' : 'text-gray-900'">
                Your Tech Advantage.
              </span>
              <span class="relative inline-block mt-1">
                <span class="text-3xl sm:text-3xl md:text-4xl lg:text-[2.75rem] font-bold transition-all duration-500"
                  :class="isDarkMode ? 'text-light-purple' : 'text-gradient'">
                  Built Differently
                </span>
                <!-- Stylish circular accent -->
                <svg class="accent-circle absolute -inset-2 -z-10 w-[110%] sm:w-[105%] md:w-full" viewBox="0 0 200 80"
                  preserveAspectRatio="none">
                  <ellipse cx="100" cy="40" rx="98" ry="38" fill="none"
                    :stroke="isDarkMode ? 'url(#gradientDark)' : 'url(#gradient)'" stroke-width="2" opacity="0.3" />
                  <defs>
                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                      <stop offset="0%" style="stop-color:#5B21B6;stop-opacity:1" />
                      <stop offset="100%" style="stop-color:#3B82F6;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="gradientDark" x1="0%" y1="0%" x2="100%" y2="0%">
                      <stop offset="0%" style="stop-color:#C4B5FD;stop-opacity:0.4" />
                      <stop offset="100%" style="stop-color:#93C5FD;stop-opacity:0.4" />
                    </linearGradient>
                  </defs>
                </svg>
                <!-- Double underline with brand colors -->
                <svg class="absolute -bottom-2 left-1/2 -translate-x-1/2 w-[65%] sm:w-full h-3" viewBox="0 0 200 12"
                  fill="none">
                  <path d="M2 7C50 4 100 2 198 6"
                    :stroke="isDarkMode ? 'url(#underlineGradient1Dark)' : 'url(#underlineGradient1)'"
                    stroke-width="2.5" stroke-linecap="round" fill="none" />
                  <path d="M2 10C50 7 100 5 198 9"
                    :stroke="isDarkMode ? 'url(#underlineGradient2Dark)' : 'url(#underlineGradient2)'"
                    stroke-width="2.5" stroke-linecap="round" fill="none" />
                  <defs>
                    <linearGradient id="underlineGradient1" x1="0%" y1="0%" x2="100%" y2="0%">
                      <stop offset="0%" style="stop-color:#5B21B6;stop-opacity:1" />
                      <stop offset="100%" style="stop-color:#3B82F6;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="underlineGradient2" x1="0%" y1="0%" x2="100%" y2="0%">
                      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:0.6" />
                      <stop offset="100%" style="stop-color:#5B21B6;stop-opacity:0.6" />
                    </linearGradient>
                    <linearGradient id="underlineGradient1Dark" x1="0%" y1="0%" x2="100%" y2="0%">
                      <stop offset="0%" style="stop-color:#C4B5FD;stop-opacity:0.8" />
                      <stop offset="100%" style="stop-color:#93C5FD;stop-opacity:0.8" />
                    </linearGradient>
                    <linearGradient id="underlineGradient2Dark" x1="0%" y1="0%" x2="100%" y2="0%">
                      <stop offset="0%" style="stop-color:#93C5FD;stop-opacity:0.5" />
                      <stop offset="100%" style="stop-color:#C4B5FD;stop-opacity:0.5" />
                    </linearGradient>
                  </defs>
                </svg>
              </span>
            </h1>
          </div>

          <!-- Description -->
          <p class="text-sm md:text-base lg:text-lg leading-relaxed max-w-2xl mx-auto lg:mx-0 font-medium transition-colors duration-500"
            :class="isDarkMode ? 'text-gray-300' : 'text-gray-700'">
            We build fast, reliable digital products that help businesses operate with clarity and confidence.
            Professional, modern web apps, mobile experiences, and cloud-ready systems engineered for real growth.
          </p>

          <!-- CTA Buttons -->
          <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start pt-2 md:pt-4">
            <!-- Primary CTA - Gradient Button -->
            <NuxtLink to="/contact"
              class="group relative inline-flex items-center justify-center gap-2 px-8 py-4 bg-gradient-to-r from-purple-700 to-blue-600 hover:from-purple-600 hover:to-blue-500 text-white font-bold text-base lg:text-lg rounded-xl overflow-hidden shadow-lg cta-button transition-all duration-300">
              <span class="relative flex items-center gap-2 z-10">
                Start Your Project
                <svg class="w-5 h-5 transition-transform duration-300 group-hover:translate-x-1" fill="none"
                  stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6">
                  </path>
                </svg>
              </span>
            </NuxtLink>

            <!-- Secondary CTA - Outlined with gradient border -->
            <NuxtLink to="/work"
              class="group relative inline-flex items-center justify-center gap-2 px-8 py-4 font-semibold text-base lg:text-lg rounded-xl button-gradient-border cta-button transition-all duration-300"
              :class="isDarkMode ? 'text-white bg-gray-800' : 'text-gray-900 bg-white'">
              <span class="relative flex items-center gap-2 z-10">
                See Our Work
                <svg class="w-5 h-5 transition-transform duration-300 group-hover:translate-x-1" fill="none"
                  stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6">
                  </path>
                </svg>
              </span>
            </NuxtLink>
          </div>
        </div>

        <!-- Right Side - Lottie Animation (2/5 on desktop) -->
        <div
          class="relative h-[250px] sm:h-[350px] md:h-[400px] lg:h-[500px] order-1 lg:order-2 lg:col-span-2 flex items-center justify-center">
          <div id="lottie-animation"
            class="lottie-container w-full h-full flex items-center justify-center transition-all duration-500"
            :class="{ 'lottie-dark': isDarkMode }">
            <!-- Lottie will be loaded here via JavaScript -->
          </div>
        </div>

      </div>
    </div>

    <!-- Trust Indicators - Positioned at the bottom of the section -->
    <div class="absolute bottom-2 md:bottom-4 left-1/2 transform -translate-x-1/2 w-full max-w-6xl px-4 sm:px-6">
      <!-- Desktop: Single Card -->
      <div class="hidden md:block rounded-xl shadow-lg px-6 sm:px-8 py-4 sm:py-5 border transition-all duration-500"
        :class="isDarkMode ? 'bg-gray-800/95 border-purple-500/20' : 'bg-gray-100 border-gray-100'"
        style="box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.55), 0 4px 6px -2px rgba(0, 0, 0, 0.35);">
        <div class="flex flex-row gap-8 lg:gap-12 items-center justify-center">
          <!-- Indicator 1 -->
          <div class="flex items-start gap-3 flex-1 text-left">
            <img src="~/assets/home/img/security.png" alt="Security"
              class="w-8 h-8 sm:w-10 sm:h-10 flex-shrink-0 transition-all duration-500"
              :class="{ 'brand-icon-filter-dark': isDarkMode, 'brand-icon-filter': !isDarkMode }" />
            <div>
              <h3 class="font-bold text-sm sm:text-base md:text-lg mb-1 transition-colors duration-500"
                :class="isDarkMode ? 'text-gray-100' : 'text-gray-900'">
                Trusted by Businesses in Nigeria and Beyond
              </h3>
              <p class="text-xs sm:text-sm md:text-base transition-colors duration-500"
                :class="isDarkMode ? 'text-gray-300' : 'text-gray-900'">
                Reliable digital solutions built for long-term performance.
              </p>
            </div>
          </div>

          <!-- Divider -->
          <div class="w-px h-12 lg:h-14 bg-gradient-to-b from-purple-700 to-blue-600"></div>

          <!-- Indicator 2 -->
          <div class="flex items-start gap-3 flex-1 text-left">
            <img src="~/assets/home/img/quality.png" alt="Quality"
              class="w-8 h-8 sm:w-10 sm:h-10 flex-shrink-0 transition-all duration-500"
              :class="{ 'brand-icon-filter-dark': isDarkMode, 'brand-icon-filter': !isDarkMode }" />
            <div>
              <h3 class="font-bold text-sm sm:text-base md:text-lg mb-1 transition-colors duration-500"
                :class="isDarkMode ? 'text-gray-100' : 'text-gray-900'">
                Quality, Delivered Fast
              </h3>
              <p class="text-xs sm:text-sm md:text-base transition-colors duration-500"
                :class="isDarkMode ? 'text-gray-300' : 'text-gray-900'">
                Speed without compromise plus rapid development.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Mobile: Two Separate Cards Side by Side -->
      <div class="grid grid-cols-2 gap-3 md:hidden">
        <!-- Card 1 -->
        <div class="rounded-xl shadow-lg px-4 py-4 border transition-all duration-500"
          :class="isDarkMode ? 'bg-gray-800/95 border-purple-500/20' : 'bg-gray-100 border-gray-100'"
          style="box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.55), 0 4px 6px -2px rgba(0, 0, 0, 0.35);">
          <div class="flex flex-col items-center text-center gap-2">
            <div>
              <h3 class="font-bold text-xs mb-1 transition-colors duration-500"
                :class="isDarkMode ? 'text-gray-100' : 'text-gray-900'">
                Trusted by Businesses in Nigeria
              </h3>
            </div>
          </div>
        </div>

        <!-- Card 2 -->
        <div class="rounded-xl shadow-lg px-4 py-4 border transition-all duration-500"
          :class="isDarkMode ? 'bg-gray-800/95 border-purple-500/20' : 'bg-gray-100 border-gray-100'"
          style="box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.55), 0 4px 6px -2px rgba(0, 0, 0, 0.35);">
          <div class="flex flex-col items-center text-center gap-2">
            <div>
              <h3 class="font-bold text-xs mb-1 transition-colors duration-500"
                :class="isDarkMode ? 'text-gray-100' : 'text-gray-900'">
                Quality, Delivered Fast. No Compromise.
              </h3>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Subtle gradient overlay at bottom for depth -->
    <div class="absolute bottom-0 left-0 right-0 h-32 pointer-events-none transition-all duration-500"
      :class="isDarkMode ? 'bg-gradient-to-t from-gray-900/50 to-transparent' : 'bg-gradient-to-t from-gray-50/50 to-transparent'">
    </div>
  </main>
</template>

<script setup>
import { onMounted, ref } from 'vue';

// Reactive state for dark mode
const isDarkMode = ref(false)
const mouseX = ref(0)
const mouseY = ref(0)
const heroElement = ref(null)

// Mouse move handler for dark mode
const handleMouseMove = (event) => {
  if (!heroElement.value) return

  const rect = heroElement.value.getBoundingClientRect()
  mouseX.value = event.clientX - rect.left
  mouseY.value = event.clientY - rect.top

  // Sync with navbar dark mode - you might want to use a shared state or event bus
  // For now, we'll activate when mouse is in hero section
  if (!isDarkMode.value) {
    isDarkMode.value = true
  }
}

const handleMouseLeave = () => {
  // Deactivate dark mode when mouse leaves hero section
  isDarkMode.value = false
}

onMounted(() => {
  // Load Lottie player script and initialize
  const loadLottie = async () => {
    // Check if script already exists
    if (!document.querySelector('script[src*="dotlottie-player"]')) {
      const script = document.createElement('script');
      script.src = 'https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs';
      script.type = 'module';
      document.head.appendChild(script);

      // Wait for script to load
      await new Promise((resolve) => {
        script.onload = resolve;
      });
    }

    // Create and configure the player
    const container = document.getElementById('lottie-animation');
    if (container && !container.querySelector('dotlottie-player')) {
      const player = document.createElement('dotlottie-player');
      player.setAttribute('src', 'https://lottie.host/1617352f-c57b-4585-8f08-721e4a949c01/IX6yVMPCQM.lottie');
      player.setAttribute('background', 'transparent');
      player.setAttribute('speed', '1');
      player.setAttribute('loop', '');
      player.setAttribute('autoplay', '');
      player.style.width = '100%';
      player.style.height = '100%';
      container.appendChild(player);
    }
  };

  loadLottie();
});
</script>

<style scoped>
/* Brand gradient colors from logo - Deeper gradient */
.text-gradient {
  background: linear-gradient(135deg, #4C1D95 0%, #2563EB 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Light purple for dark mode */
.text-light-purple {
  background: linear-gradient(135deg, #C4B5FD 0%, #93C5FD 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Hero headline animation */
.hero-headline {
  animation: fadeInUp 0.8s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Lottie container styling with gradient glow */
.lottie-container {
  filter: drop-shadow(0 10px 40px rgba(91, 33, 182, 0.15));
  transition: filter 0.5s ease;
}

.lottie-dark {
  filter: drop-shadow(0 10px 40px rgba(199, 210, 254, 0.15)) invert(1) hue-rotate(180deg);
}

/* Circular accent animation */
.accent-circle {
  opacity: 0;
  animation: fadeInCircle 1.2s ease-out 0.3s forwards;
}

@keyframes fadeInCircle {
  from {
    opacity: 0;
    transform: scale(0.8) rotate(-5deg);
  }

  to {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}

/* Smooth button hover transitions */
.cta-button {
  transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.4s ease;
}

.cta-button:hover {
  transform: scale(1.03);
  box-shadow: 0 20px 40px -10px rgba(91, 33, 182, 0.4);
}

/* Gradient border button effect */
.button-gradient-border {
  position: relative;
  border: 2px solid transparent;
  background-clip: padding-box;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.button-gradient-border::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 0.75rem;
  padding: 2px;
  background: linear-gradient(135deg, #5B21B6, #3B82F6);
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
}

/* Brand color filter for icons */
.brand-icon-filter {
  filter: brightness(0) saturate(100%) invert(21%) sepia(89%) saturate(2686%) hue-rotate(251deg) brightness(91%) contrast(93%);
}

.brand-icon-filter-dark {
  filter: brightness(0) saturate(100%) invert(84%) sepia(14%) saturate(1122%) hue-rotate(195deg) brightness(107%) contrast(94%);
}

/* Responsive adjustments */
@media (max-width: 640px) {
  .hero-headline span {
    font-size: 1.75rem;
  }
}

@media (min-width: 640px) and (max-width: 1023px) {
  .hero-headline span {
    font-size: 2rem;
  }
}

/* Smooth transitions */
* {
  transition: color 0.3s ease, background-color 0.3s ease;
}
</style>